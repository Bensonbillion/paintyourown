{%- comment -%}
  Renders a product card.
  Accepts:
  - product: {Object} Shopify product object
  Usage:
  {% render 'product-card', product: product %}
{%- endcomment -%}

<div class="product-card">
  {%- if product.tags contains 'Best Seller' -%}
    <span class="product-card__badge">Best Seller</span>
  {%- elsif product.compare_at_price > product.price -%}
    {%- assign savings = product.compare_at_price | minus: product.price | times: 100 | divided_by: product.compare_at_price -%}
    <span class="product-card__badge product-card__badge--sale">Save {{ savings }}%</span>
  {%- elsif product.tags contains 'New' -%}
    <span class="product-card__badge" style="background:#4ECDC4;">New</span>
  {%- endif -%}

  <a href="{{ product.url }}" class="product-card__image-wrap">
    {%- if product.featured_image -%}
      <img class="product-card__image product-card__image--primary"
           src="{{ product.featured_image | image_url: width: 500 }}"
           alt="{{ product.featured_image.alt | escape | default: product.title }}"
           loading="lazy"
           width="500"
           height="500">

      {%- if product.images.size > 1 -%}
        <img class="product-card__image product-card__image--hover"
             src="{{ product.images[1] | image_url: width: 500 }}"
             alt="{{ product.images[1].alt | escape | default: product.title }}"
             loading="lazy"
             width="500"
             height="500">
      {%- endif -%}
    {%- else -%}
      {{ 'product-1' | placeholder_svg_tag }}
    {%- endif -%}
  </a>

  <div class="product-card__quick-add">
    {%- form 'product', product -%}
      <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
      <button type="submit" class="btn btn--primary btn--full btn--small">
        Add to Cart
      </button>
    {%- endform -%}
  </div>

  <div class="product-card__info">
    <h3 class="product-card__title">
      <a href="{{ product.url }}">{{ product.title }}</a>
    </h3>
    <div class="product-card__price">
      {%- if product.price_varies -%}
        From {{ product.price_min | money }}
      {%- else -%}
        {{ product.price | money }}
      {%- endif -%}
      {%- if product.compare_at_price > product.price -%}
        <span class="product-card__price-compare">{{ product.compare_at_price | money }}</span>
      {%- endif -%}
    </div>
    <div class="product-card__rating">
      <span class="product-card__stars">&#9733;&#9733;&#9733;&#9733;&#9733;</span>
      <span>4.9</span>
    </div>
  </div>
</div>
